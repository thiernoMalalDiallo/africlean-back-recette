{"version":3,"sources":["./src/app/pages/authentication/authentication.page.html","./src/app/pages/authentication/authentication.module.ts","./src/app/pages/authentication/authentication.page.scss","./src/app/pages/authentication/authentication.page.ts"],"names":[],"mappings":"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","file":"pages-authentication-authentication-module-es2015.js","sourcesContent":["module.exports = \"<ion-content class=\\\"container\\\">\\r\\n\\r\\n    <div class=\\\"content-page\\\">\\r\\n\\r\\n        <div *ngIf=\\\"!counts\\\">\\r\\n\\r\\n                <!-- Header de la page -->\\r\\n            <div class=\\\"header\\\">\\r\\n                <ion-grid>\\r\\n                    <ion-row class=\\\"title\\\">\\r\\n                        <span>{{ 'PAGES.AUTHENTICATION.TITLE' | translate }}</span>\\r\\n                    </ion-row>\\r\\n                </ion-grid>\\r\\n            </div>\\r\\n\\r\\n            <!-- Message de confirmation après inscription -->\\r\\n            <africlean-info-bulle *ngIf=\\\"displayRegistrationConfirmation\\\" [type]=\\\"'validate'\\\" \\r\\n                                [message]=\\\"'Votre enrégistrement a bien été pris en compte'\\\">\\r\\n\\r\\n            </africlean-info-bulle>\\r\\n            \\r\\n            <ion-grid class=\\\"formulaire\\\">\\r\\n\\r\\n            <!-- Champ d'identification -->\\r\\n                <ion-row>\\r\\n\\r\\n                    <ion-col size=\\\"12\\\">\\r\\n\\r\\n                        <ion-grid>\\r\\n                            <ion-col size=\\\"12\\\">\\r\\n                                <ion-grid>\\r\\n\\r\\n                                </ion-grid>\\r\\n                                <ion-label color='primary' position=\\\"stacked\\\">\\r\\n                                    {{ 'PAGES.AUTHENTICATION.LABELS.ID' | translate }}\\r\\n                                </ion-label>\\r\\n                            </ion-col>\\r\\n\\r\\n                            <ion-col size=\\\"12\\\">\\r\\n                                <div>\\r\\n                                    <ion-input clearInput [(ngModel)]=\\\"login\\\" type='text'>\\r\\n                                    </ion-input>\\r\\n                                </div>\\r\\n                            </ion-col>\\r\\n                        </ion-grid>\\r\\n                    </ion-col>\\r\\n\\r\\n                </ion-row>\\r\\n\\r\\n                <!-- Champ de mot de passe -->\\r\\n                <ion-row>\\r\\n\\r\\n                    <ion-col size=\\\"12\\\">\\r\\n                        <ion-grid>\\r\\n                            <ion-col size=\\\"12\\\">\\r\\n                                <ion-label color='primary' position=\\\"stacked\\\">\\r\\n                                    {{ 'PAGES.AUTHENTICATION.LABELS.PASSWORD' | translate }}\\r\\n                                </ion-label>\\r\\n                            </ion-col>\\r\\n\\r\\n                            <ion-col size=\\\"12\\\">\\r\\n                                <div>\\r\\n                                    <ion-input clearInput [(ngModel)]=\\\"password\\\" type='password'>\\r\\n                                    </ion-input>\\r\\n                                </div>\\r\\n                            </ion-col>\\r\\n                        </ion-grid>\\r\\n                    </ion-col>\\r\\n\\r\\n                </ion-row>\\r\\n\\r\\n                <ion-row>\\r\\n\\r\\n                    <ion-col size=\\\"12\\\">\\r\\n\\r\\n                        <div class=\\\"forgot-password\\\" (click)=\\\"forgotPassword()\\\">\\r\\n                            \\r\\n                            {{'PAGES.AUTHENTICATION.FORGOT_PASSWORD' | translate }} ?\\r\\n\\r\\n                        </div>\\r\\n\\r\\n                        <!-- Bouton de confirmation -->\\r\\n                        <africlean-small-button [theme]=\\\"'blue'\\\" [title]=\\\"'CONNEXION'\\\"\\r\\n                                        (clickButton)=\\\"sendAuthent()\\\">\\r\\n                        </africlean-small-button>\\r\\n\\r\\n                        <div class=\\\"separate\\\"></div>\\r\\n                        \\r\\n                        <!-- Bouton d'inscription -->\\r\\n                        <africlean-small-button [theme]=\\\"'orange'\\\" [title]=\\\"'INSCRIPTION'\\\"\\r\\n                                        (clickButton)=\\\"goRegistration()\\\">\\r\\n                        </africlean-small-button>\\r\\n\\r\\n                    </ion-col>\\r\\n\\r\\n                </ion-row>\\r\\n\\r\\n            </ion-grid>\\r\\n\\r\\n            <!-- Gestion des erreurs -->\\r\\n            <div text-center>\\r\\n                <ion-spinner [hidden]='hideSpinner'></ion-spinner>\\r\\n            </div>\\r\\n            <africlean-info-bulle *ngIf='errorMsg' [type]=\\\"'error'\\\" \\r\\n                                [message]=\\\"errorMsg\\\">\\r\\n\\r\\n            </africlean-info-bulle>\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <!-- Boutons Accès espace -->\\r\\n        <div *ngIf=\\\"counts\\\" class=\\\"choice-space\\\">\\r\\n\\r\\n            <div class=\\\"button\\\" *ngFor=\\\"let count of counts\\\">\\r\\n                \\r\\n                <africlean-small-button [theme]=\\\"'orange'\\\" [title]=\\\"'accèder à mon espace ' + count.role\\\"\\r\\n                                        (clickButton)=\\\"goTo(count.role)\\\">\\r\\n                </africlean-small-button>\\r\\n\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        \\r\\n    </div>\\r\\n      \\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { AuthenticationPage } from './authentication.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AuthenticationPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [AuthenticationPage]\r\n})\r\nexport class AuthenticationPageModule {}\r\n","module.exports = \".container .content-page {\\n  background-color: var(--ion-color-gris);\\n  height: 100vh;\\n  padding-bottom: 35rem;\\n}\\n.container .content-page .header {\\n  margin-top: 10vh;\\n  margin-bottom: -2rem;\\n}\\n.container .content-page .header span {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  margin-bottom: 2rem;\\n}\\n.container .content-page .header .title span {\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: 2rem;\\n}\\n.container .content-page .formulaire {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-direction: column;\\n  margin-top: 0rem;\\n  margin-bottom: 10vh;\\n}\\n.container .content-page .formulaire ion-label {\\n  font-size: 1rem;\\n  margin-bottom: 1rem;\\n  color: var(--ion-color-text-purple-darke);\\n}\\n.container .content-page .formulaire ion-input {\\n  max-width: 20rem;\\n  width: 70vw;\\n  height: 2.6rem;\\n  border-radius: 0.5rem;\\n  box-shadow: 9px 8px 20px rgba(0, 0, 0, 0.2);\\n  color: var(--ion-color-grey);\\n  --padding-start: 1rem;\\n  margin-top: 0.5rem;\\n}\\n.container .content-page .formulaire ion-input span {\\n  margin-left: 1rem;\\n}\\n.container .content-page .formulaire .forgot-password {\\n  color: var(--ion-color-primary);\\n  margin-bottom: 1rem;\\n  font-size: 1rem;\\n  text-align: center;\\n  cursor: pointer;\\n}\\n.container .content-page .formulaire .separate {\\n  margin-top: 1rem;\\n}\\n.container .content-page .choice-space {\\n  padding-top: 50vh;\\n  display: -webkit-box;\\n  display: flex;\\n  width: -webkit-max-content;\\n  width: -moz-max-content;\\n  width: max-content;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-direction: column;\\n  margin: auto;\\n}\\n.container .content-page .choice-space .button {\\n  margin-bottom: 10vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aGVudGljYXRpb24vQzpcXFVzZXJzXFx0bWRpYWxsb1xcRG9jdW1lbnRzXFxQcm9qZXRfQWZyaXF1ZVxcQWZyaWNsZWFuXFxhZnJpY2xlYW4taW9uaWMvc3JjXFxhcHBcXHBhZ2VzXFxhdXRoZW50aWNhdGlvblxcYXV0aGVudGljYXRpb24ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9hdXRoZW50aWNhdGlvbi9hdXRoZW50aWNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFFSSx1Q0FBQTtFQUNBLGFBQUE7RUFDQSxxQkFBQTtBQ0RSO0FER1E7RUFDSSxnQkFBQTtFQUNBLG9CQUFBO0FDRFo7QURHWTtFQUNJLGlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQ0RoQjtBREtnQjtFQUNJLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtBQ0hwQjtBRFFRO0VBRUksb0JBQUE7RUFBQSxhQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtFQUNBLDRCQUFBO0VBQUEsNkJBQUE7VUFBQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUNQWjtBRFNZO0VBQ0ksZUFBQTtFQUNBLG1CQUFBO0VBQ0EseUNBQUE7QUNQaEI7QURVWTtFQUVJLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGNBQUE7RUFDQSxxQkFBQTtFQUNBLDJDQUFBO0VBQ0EsNEJBQUE7RUFDQSxxQkFBQTtFQUNBLGtCQUFBO0FDVGhCO0FEV2dCO0VBQ0ksaUJBQUE7QUNUcEI7QURhWTtFQUVJLCtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0FDWmhCO0FEZVk7RUFDSSxnQkFBQTtBQ2JoQjtBRGtCUTtFQUNJLGlCQUFBO0VBQ0Esb0JBQUE7RUFBQSxhQUFBO0VBQ0EsMEJBQUE7RUFBQSx1QkFBQTtFQUFBLGtCQUFBO0VBQ0EsNEJBQUE7RUFBQSw2QkFBQTtVQUFBLHNCQUFBO0VBQ0EsWUFBQTtBQ2hCWjtBRGtCWTtFQUNJLG1CQUFBO0FDaEJoQiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGhlbnRpY2F0aW9uL2F1dGhlbnRpY2F0aW9uLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xyXG4gICAgLmNvbnRlbnQtcGFnZXtcclxuXHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWdyaXMpO1xyXG4gICAgICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDM1cmVtO1xyXG5cclxuICAgICAgICAuaGVhZGVyIHtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMTB2aDtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogLTJyZW07XHJcblxyXG4gICAgICAgICAgICBzcGFuIHtcclxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41cmVtO1xyXG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAudGl0bGUge1xyXG4gICAgICAgICAgICAgICAgc3BhbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDJyZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mb3JtdWxhaXJlIHtcclxuXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDByZW07XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwdmg7XHJcblxyXG4gICAgICAgICAgICBpb24tbGFiZWwge1xyXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItdGV4dC1wdXJwbGUtZGFya2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGlvbi1pbnB1dCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDIwcmVtO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDcwdnc7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuNnJlbTtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDlweCA4cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWdyZXkpO1xyXG4gICAgICAgICAgICAgICAgLS1wYWRkaW5nLXN0YXJ0IDogMXJlbTtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNwYW4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZm9yZ290LXBhc3N3b3JkIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcclxuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLnNlcGFyYXRle1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMXJlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmNob2ljZS1zcGFjZXtcclxuICAgICAgICAgICAgcGFkZGluZy10b3A6IDUwdmg7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIHdpZHRoOiBtYXgtY29udGVudDtcclxuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgbWFyZ2luOiBhdXRvO1xyXG5cclxuICAgICAgICAgICAgLmJ1dHRvbntcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwdmg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIuY29udGFpbmVyIC5jb250ZW50LXBhZ2Uge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItZ3Jpcyk7XG4gIGhlaWdodDogMTAwdmg7XG4gIHBhZGRpbmctYm90dG9tOiAzNXJlbTtcbn1cbi5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAuaGVhZGVyIHtcbiAgbWFyZ2luLXRvcDogMTB2aDtcbiAgbWFyZ2luLWJvdHRvbTogLTJyZW07XG59XG4uY29udGFpbmVyIC5jb250ZW50LXBhZ2UgLmhlYWRlciBzcGFuIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBtYXJnaW4tYm90dG9tOiAycmVtO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5oZWFkZXIgLnRpdGxlIHNwYW4ge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBtYXJnaW4tdG9wOiAycmVtO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5mb3JtdWxhaXJlIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgbWFyZ2luLXRvcDogMHJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMTB2aDtcbn1cbi5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAuZm9ybXVsYWlyZSBpb24tbGFiZWwge1xuICBmb250LXNpemU6IDFyZW07XG4gIG1hcmdpbi1ib3R0b206IDFyZW07XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItdGV4dC1wdXJwbGUtZGFya2UpO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5mb3JtdWxhaXJlIGlvbi1pbnB1dCB7XG4gIG1heC13aWR0aDogMjByZW07XG4gIHdpZHRoOiA3MHZ3O1xuICBoZWlnaHQ6IDIuNnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICBib3gtc2hhZG93OiA5cHggOHB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWdyZXkpO1xuICAtLXBhZGRpbmctc3RhcnQ6IDFyZW07XG4gIG1hcmdpbi10b3A6IDAuNXJlbTtcbn1cbi5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAuZm9ybXVsYWlyZSBpb24taW5wdXQgc3BhbiB7XG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5mb3JtdWxhaXJlIC5mb3Jnb3QtcGFzc3dvcmQge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICBmb250LXNpemU6IDFyZW07XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5mb3JtdWxhaXJlIC5zZXBhcmF0ZSB7XG4gIG1hcmdpbi10b3A6IDFyZW07XG59XG4uY29udGFpbmVyIC5jb250ZW50LXBhZ2UgLmNob2ljZS1zcGFjZSB7XG4gIHBhZGRpbmctdG9wOiA1MHZoO1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogbWF4LWNvbnRlbnQ7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1hcmdpbjogYXV0bztcbn1cbi5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAuY2hvaWNlLXNwYWNlIC5idXR0b24ge1xuICBtYXJnaW4tYm90dG9tOiAxMHZoO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { AfricleanControlAuthenticationProvider } from 'src/providers/africlean-control-fields/africlean-control-authentication.provider';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AfricleanHttpUserProvider } from 'src/providers/africlean-http/africlean-http-user.provider';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AfricleanLoginModel } from 'src/models/africlean-login.model';\r\nimport { AfricleanSessionProvider } from 'src/providers/africlean-session/africlean-session.provider';\r\nimport { AfricleanUserModel } from 'src/models/africlean-user.model';\r\nimport { AfricleanObservablesProvider } from 'src/providers/africlean-observables/africlean-observables.provider';\r\nimport { AfricleanWebsocketProvider } from 'src/providers/africlean-websocket/africlean-websocket.provider';\r\n\r\n@Component({\r\n  selector: 'page-authentication',\r\n  templateUrl: './authentication.page.html',\r\n  styleUrls: ['./authentication.page.scss'],\r\n})\r\n/**\r\n * Page d'authentification iOS via SECmobile\r\n */\r\nexport class AuthenticationPage implements OnInit {\r\n\r\n  /**\r\n   * Message d'erreur à afficher si un problème d'authentification survient\r\n   */\r\n  public errorMsg: string;\r\n\r\n  /**\r\n   * Etat du spinner de chargement\r\n   */\r\n  public hideSpinner = true;\r\n\r\n  /**\r\n   * Identifiant de l'utilisateur - phone number\r\n   */\r\n  public login: string;\r\n\r\n  /**\r\n   * Mot de passe\r\n   */\r\n  public password: string;\r\n\r\n  /**\r\n   * Afficher un message de confirmation une fois enregistrer\r\n   */\r\n  public displayRegistrationConfirmation = false;\r\n\r\n  public counts: AfricleanLoginModel[];\r\n\r\n  /**\r\n   * Constructeur de la page\r\n   * @param navCtrl\r\n   * @param secMobilService\r\n   */\r\n  constructor(private navCtrl: NavController,\r\n              private controlField: AfricleanControlAuthenticationProvider,\r\n              private translateService: TranslateService,\r\n              private httpUser: AfricleanHttpUserProvider,\r\n              private route: ActivatedRoute,\r\n              private session: AfricleanSessionProvider,\r\n              public observableProvider: AfricleanObservablesProvider,\r\n              private websocket: AfricleanWebsocketProvider) {\r\n  }\r\n\r\n  /**\r\n   * Initialisation de la page\r\n   */\r\n  ngOnInit(): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n        this.displayRegistrationConfirmation = params.displayRegistrationConfirmation;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Lance l'authentification\r\n   */\r\n  public sendAuthent() {\r\n    const fields = {\r\n      login: this.login,\r\n      password: this.password\r\n    };\r\n\r\n    const result = this.controlField.authentication(fields);\r\n\r\n    this.hideSpinner = result.hideSpinner;\r\n\r\n    if (result.message != null) {\r\n      this.getMessage(result.message);\r\n    } else {\r\n      this.errorMsg = result.message;\r\n      this.httpUser.login('login/login-user', fields.login, fields.password).subscribe(\r\n        (user) => {\r\n          this.goToHome(user);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Renvoie le bon message\r\n   * @param message message à afficher\r\n   */\r\n  private getMessage(message: string) {\r\n    this.translateService.get(message).subscribe((res: string) => {\r\n      this.errorMsg = res;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Permet de créer une session pour l'utilisateur\r\n   */\r\n  public setSession() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Rédirige vers l'inscription\r\n   */\r\n  public goRegistration() {\r\n    this.navCtrl.navigateForward('registration');\r\n  }\r\n\r\n  /**\r\n   * Rédirige vers la récuperation du mot de passe\r\n   */\r\n  public forgotPassword() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Récupère le compte correspondant à l'espace\r\n   * @param space Rôle\r\n   */\r\n  public goTo(space: string) {\r\n\r\n      let userId = '';\r\n      let role = '';\r\n\r\n      this.counts.forEach(userLog => {\r\n        if (userLog.role === space) {\r\n          userId = userLog.objectId;\r\n          role = userLog.role;\r\n        }\r\n      });\r\n\r\n      this.httpUser.loged('login/user-loged/', userId).subscribe(\r\n        (user) => {\r\n            this.setSessionVariables(user, role).then(\r\n              (_) => {\r\n                // Signale une nouvelle session\r\n                this.observableProvider.isAuth.emit(true);\r\n                this.setPseudoToServer();\r\n                this.navCtrl.navigateForward('home');\r\n              }\r\n            );\r\n        }\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Renseigne les variables de session\r\n   * @param user Utilisateur connecté\r\n   */\r\n  private async setSessionVariables(user: AfricleanUserModel, role: string) {\r\n    await this.session.setItem('user', user);\r\n    await this.session.setItem('userId', user.objectId);\r\n    await this.session.setItem('login', user.phoneNumber);\r\n    await this.session.setItem('password', user.password);\r\n    await this.session.setItem('role', role);\r\n    await this.session.setItem('isSubscribe', user.isSubscribe);\r\n  }\r\n\r\n  /**\r\n   * Rédirige l'utilisateur vers le bon espace\r\n   * @param userLog User log\r\n   */\r\n  private goToHome(userLog: AfricleanLoginModel[]) {\r\n    if (userLog.length === 0) {\r\n      // le compte n'existe pas\r\n      this.getMessage('PAGES.AUTHENTICATION.ERROR.NOT_EXIST_COUNT');\r\n      this.hideSpinner = true;\r\n    }\r\n    if (userLog.length > 0) {\r\n        const role = userLog[0].role;\r\n        // Dans le cas ou l'utilisateur à un seul compte\r\n        if (userLog.length === 1) {\r\n          this.httpUser.loged('login/user-loged/', userLog[0].objectId).subscribe(\r\n            (user) => {\r\n                this.setSessionVariables(user, role).then(\r\n                  (_) => {\r\n                    // Signale une nouvelle session\r\n                    this.observableProvider.isAuth.emit(true);\r\n                    this.setPseudoToServer();\r\n                    this.navCtrl.navigateForward('home');\r\n                  }\r\n                );\r\n            }\r\n          );\r\n        }\r\n\r\n        // Dans le cas ou l'utilisateur à deux comptes. Donc il faut donner le choix\r\n        // a l'utilisateur de choisir entre les deux comptes\r\n        if (userLog.length === 2) {\r\n            // donner le choix\r\n            this.counts = userLog;\r\n\r\n        }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Envoi le userId au serveur\r\n   */\r\n  public async setPseudoToServer() {\r\n    const userId = await this.session.getItem('userId');\r\n    this.websocket.emit('newClient', userId);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}